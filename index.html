<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Checkout Form Validation and Discount Code</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
  <div class="max-w-3xl mx-auto bg-white shadow-lg rounded-lg mt-10 p-8">
    <h1 class="text-3xl font-semibold mb-6 text-center">Checkout Form</h1>

    <!-- Checkout Form -->
    <form id="checkoutForm" onsubmit="return validateForm()" class="space-y-4">

      <!-- Customer Info -->
      <div>
        <label class="block text-gray-700 font-medium">Full Name</label>
        <input type="text" id="name" class="w-full border rounded px-3 py-2 focus:ring focus:ring-blue-200" placeholder="Vidhya">
      </div>

      <div>
        <label class="block text-gray-700 font-medium">Email</label>
        <input type="email" id="email" class="w-full border rounded px-3 py-2 focus:ring focus:ring-blue-200" placeholder="example@email.com">
      </div>

      <div>
        <label class="block text-gray-700 font-medium">Address</label>
        <textarea id="address" class="w-full border rounded px-3 py-2 focus:ring focus:ring-blue-200" placeholder="123 Main Street, City, ZIP"></textarea>
      </div>

      <!-- Payment Info -->
      <h2 class="text-xl font-semibold mt-6 mb-2">Payment Details</h2>
      <div>
        <label class="block text-gray-700 font-medium">Card Number</label>
        <input type="text" id="cardNumber" maxlength="16" class="w-full border rounded px-3 py-2 focus:ring focus:ring-blue-200" placeholder="1111222233334444">
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-gray-700 font-medium">Expiry Date (MM/YY)</label>
          <input type="text" id="expiry" class="w-full border rounded px-3 py-2 focus:ring focus:ring-blue-200" placeholder="12/26">
        </div>
        <div>
          <label class="block text-gray-700 font-medium">CVV</label>
          <input type="text" id="cvv" maxlength="3" class="w-full border rounded px-3 py-2 focus:ring focus:ring-blue-200" placeholder="123">
        </div>
      </div>

      <!-- Discount Code -->
      <div class="mt-6">
        <label class="block text-gray-700 font-medium">Discount Code</label>
        <div class="flex space-x-2">
          <input type="text" id="discountCode" class="flex-1 border rounded px-3 py-2 focus:ring focus:ring-blue-200" placeholder="Enter code (e.g., SAVE10)">
          <button type="button" onclick="applyDiscount()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">Apply</button>
        </div>
        <p id="discountMessage" class="text-sm mt-1"></p>
      </div>

      <!-- Total Price -->
      <div class="text-right mt-6 border-t pt-4">
        <p id="totalPrice" class="text-xl font-semibold text-gray-800">Total: ₹49,468</p>
      </div>

      <!-- Submit Button -->
      <div class="text-center">
        <button type="submit" class="bg-yellow-400 hover:bg-yellow-500 text-black font-medium py-2 px-6 rounded shadow">Place Order</button>
      </div>
    </form>
  </div>

  <script>
    let originalTotal = 49468;
    let discountedTotal = originalTotal;

    // Apply discount code
    function applyDiscount() {
      const code = document.getElementById("discountCode").value.trim().toUpperCase();
      const msg = document.getElementById("discountMessage");
      const totalEl = document.getElementById("totalPrice");

      if (code === "SAVE10") {
        discountedTotal = originalTotal * 0.9;
        msg.textContent = "✅ Discount applied! You saved 10%.";
        msg.className = "text-green-600 text-sm mt-1";
      } else if (code === "") {
        msg.textContent = "⚠️ Please enter a discount code.";
        msg.className = "text-yellow-600 text-sm mt-1";
        discountedTotal = originalTotal;
      } else {
        msg.textContent = "❌ Invalid discount code.";
        msg.className = "text-red-600 text-sm mt-1";
        discountedTotal = originalTotal;
      }

      totalEl.textContent = `Total: ₹${discountedTotal.toLocaleString()}`;
    }

    // Form validation
    function validateForm() {
      const name = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const address = document.getElementById("address").value.trim();
      const cardNumber = document.getElementById("cardNumber").value.trim();
      const expiry = document.getElementById("expiry").value.trim();
      const cvv = document.getElementById("cvv").value.trim();

      const emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
      const cardPattern = /^[0-9]{16}$/;
      const expiryPattern = /^(0[1-9]|1[0-2])\/[0-9]{2}$/;
      const cvvPattern = /^[0-9]{3}$/;

      if (!name || !email || !address || !cardNumber || !expiry || !cvv) {
        alert("⚠️ Please fill out all fields.");
        return false;
      }

      if (!emailPattern.test(email)) {
        alert("❌ Please enter a valid email address.");
        return false;
      }

      if (!cardPattern.test(cardNumber)) {
        alert("❌ Card number must be 16 digits.");
        return false;
      }

      if (!expiryPattern.test(expiry)) {
        alert("❌ Expiry date format must be MM/YY.");
        return false;
      }

      if (!cvvPattern.test(cvv)) {
        alert("❌ CVV must be 3 digits.");
        return false;
      }

      alert(`✅ Order placed successfully!\nTotal Amount: ₹${discountedTotal.toLocaleString()}\nThank you for your purchase!`);
      return true;
    }
  </script>
</body>
</html>
